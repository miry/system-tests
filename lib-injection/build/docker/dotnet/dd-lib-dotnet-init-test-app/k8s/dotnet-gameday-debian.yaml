apiVersion: v1
kind: Pod
metadata:
  labels:
    app: dotnet-gameday-debian
    admission.datadoghq.com/enabled: "true"
    admission.datadoghq.com/config.mode: "socket"
    tags.datadoghq.com/service: dotnet-gameday-debian
  annotations:
    admission.datadoghq.com/dotnet-lib.version: "v2.24.0"
  name: dotnet-gameday-debian
spec:
  containers:
    - name: dotnet-gameday-debian
      image: docker.io/ddzachmontoya/minimal-web-app:debian
      readinessProbe:
        timeoutSeconds: 1
        successThreshold: 1
        failureThreshold: 1
        httpGet:
          host:
          scheme: HTTP
          path: /
          port: 80
        initialDelaySeconds: 5
        periodSeconds: 5
      ports:
        - containerPort: 80
          hostPort: 8000
          protocol: TCP
      imagePullPolicy: Always
  # Add toleration so it can deploy to arm64 node
  tolerations:
  - key: "kubernetes.io/arch"
    operator: "Equal"
    value: "arm64"
    effect: "NoSchedule"
